<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="logo.png" type="image/x-icon">
    <link rel="stylesheet" href="style2.css">
    <title>Voting Page</title>
    <style>
      
    </style>
</head>
<body>
    <div class="box" id="top">
        <h1>Medi-Caps International School</h1>
    </div>
    <center>
        <h1>Teacher Rating</h1>
    </center>
    <form id="login-form" name="login-form" action="https://script.google.com/macros/s/AKfycbw5j_3fH3bz7ZZwf9wiffBr6qYWop6ZukEUGtIDPuO_vkSHhCABgnYkkqLTZogBQBzb/exec" method="post">
        <div id="votingContainer">
            <!-- First Box -->
            <div class="box-wrapper">
                <div class="box" id="box1">
                    <h3 class="heading-wrapper">
                        <span class="text1">XYZ</span>
                    </h3>
                    <h2>&nbsp;&nbsp; Behavior <span class="emoji-button" data-category="behavior" data-value="1" onclick="vote(this)">&#x1F600;</span> <span class="emoji-button" data-category="behavior" data-value="2" onclick="vote(this)">&#128578; </span><span class="emoji-button" data-category="behavior" data-value="3" onclick="vote(this)">&#128532;</span> <span class="emoji-button" data-category="behavior" data-value="4" onclick="vote(this)">&#128544;</span></h2>
                    <h2>&nbsp;&nbsp; Teaching <span class="emoji-button" data-category="teaching" data-value="1" onclick="vote(this)">&#x1F600;</span> <span class="emoji-button" data-category="teaching" data-value="2" onclick="vote(this)">&#128578; &nbsp;</span><span class="emoji-button" data-category="teaching" data-value="3" onclick="vote(this)">&#128532;</span> <span class="emoji-button" data-category="teaching" data-value="4" onclick="vote(this)">&#128544;</span></h2>
                    <h2>&nbsp;&nbsp; Working <span class="emoji-button" data-category="working" data-value="1" onclick="vote(this)">&#x1F600;</span> <span class="emoji-button" data-category="working" data-value="2" onclick="vote(this)">&#128578; &nbsp;</span><span class="emoji-button" data-category="working" data-value="3" onclick="vote(this)">&#128532;</span> <span class="emoji-button" data-category="working" data-value="4" onclick="vote(this)">&#128544;</span></h2>
                   
                </div>
            </div>
            <!-- Second Box -->
            <div class="box-wrapper">
                <div class="box" id="box2">
                    <h3 class="heading-wrapper">
                        <span class="text2">ABC</span>
                    </h3>
                    <h2>&nbsp;&nbsp; Behavior <span class="emoji-button2" data-category="behavior" data-value="1" onclick="vote(this)">&#x1F600;</span> <span class="emoji-button2" data-category="behavior" data-value="2" onclick="vote(this)">&#128578; &nbsp;</span><span class="emoji-button2" data-category="behavior" data-value="3" onclick="vote(this)">&#128532;</span> <span class="emoji-button2" data-category="behavior" data-value="4" onclick="vote(this)">&#128544;</span></h2>
                    <h2>&nbsp;&nbsp; Teaching <span class="emoji-button2" data-category="teaching" data-value="1" onclick="vote(this)">&#x1F600;</span> <span class="emoji-button2" data-category="teaching" data-value="2" onclick="vote(this)">&#128578; &nbsp;</span><span class="emoji-button2" data-category="teaching" data-value="3" onclick="vote(this)">&#128532;</span> <span class="emoji-button2" data-category="teaching" data-value="4" onclick="vote(this)">&#128544;</span></h2>
                    <h2>&nbsp;&nbsp; Working <span class="emoji-button2" data-category="working" data-value="1" onclick="vote(this)">&#x1F600;</span> <span class="emoji-button2" data-category="working" data-value="2" onclick="vote(this)">&#128578; &nbsp;</span><span class="emoji-button2" data-category="working" data-value="3" onclick="vote(this)">&#128532;</span> <span class="emoji-button2" data-category="working" data-value="4" onclick="vote(this)">&#128544;</span></h2>
                    
                </div>
            </div>
        </div>
        <center><br><br>
            <button type="button" onclick="submitVote()">Submit</button>
        </center>
    </form>
    </center>
    </div>
    <div class="box" id="btm1">
        <center>
            <h1>Developed by Vinesh Katara of X-C</h1>
        </center>
    </div>
    <script>
       // JavaScript code to handle emoji button clicks
    function vote(emoji) {
        const buttons = emoji.parentElement.querySelectorAll('.emoji-button');
        buttons.forEach(button => button.classList.remove('clicked'));
        emoji.classList.add('clicked');
    }
    
    function submitVote() {
        const behaviorEmoji = document.querySelector('.emoji-button[data-category="behavior"].clicked');
        const teachingEmoji = document.querySelector('.emoji-button[data-category="teaching"].clicked');
        const workingEmoji = document.querySelector('.emoji-button[data-category="working"].clicked');
        //const additionalFeedback = document.querySelector('textarea[name="field1"]').value;

        // Check if all emoji categories are selected
        if (behaviorEmoji && teachingEmoji && workingEmoji) {
            // Construct the data object to send for the first box
            const formData1 = new FormData();
            formData1.append('behavior', behaviorEmoji.getAttribute('data-value'));
            formData1.append('teaching', teachingEmoji.getAttribute('data-value'));
            formData1.append('working', workingEmoji.getAttribute('data-value'));
            //formData1.append('field1', additionalFeedback);

            // Define your Google Apps Script URL for the first box
            const scriptURL1 = 'https://script.google.com/macros/s/AKfycbw5j_3fH3bz7ZZwf9wiffBr6qYWop6ZukEUGtIDPuO_vkSHhCABgnYkkqLTZogBQBzb/exec';

            // Send the data for the first box to Google Apps Script
            fetch(scriptURL1, { method: 'POST', body: formData1 })
                .then(response => {
                    if (response.ok) {
                        // Redirect to a thank you page
                        window.location.href = 'thank.html';
                    } else {
                        alert('Error: Unable to submit data.');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Error: Unable to submit data.');
                });

            // Construct the data object to send for the second box
            const behaviorEmoji2 = document.querySelector('.emoji-button2[data-category="behavior"].clicked');
            const teachingEmoji2 = document.querySelector('.emoji-button2[data-category="teaching"].clicked');
            const workingEmoji2 = document.querySelector('.emoji-button2[data-category="working"].clicked');
            //const additionalFeedback2 = document.querySelector('textarea[name="field2"]').value;

            const formData2 = new FormData();
            formData2.append('behavior2', behaviorEmoji2.getAttribute('data-value'));
            formData2.append('teaching2', teachingEmoji2.getAttribute('data-value'));
            formData2.append('working2', workingEmoji2.getAttribute('data-value'));
            //formData2.append('field2', additionalFeedback2);

            // Define your Google Apps Script URL for the second box
            const scriptURL2 = 'https://script.google.com/macros/s/AKfycbw5j_3fH3bz7ZZwf9wiffBr6qYWop6ZukEUGtIDPuO_vkSHhCABgnYkkqLTZogBQBzb/exec';

            // Send the data for the second box to Google Apps Script
            fetch(scriptURL2, { method: 'POST', body: formData2 })
                .then(response => {
                    if (response.ok) {
                        // Redirect to a thank you page
                        window.location.href = 'thank.html';
                    } else {
                        alert('Error: Unable to submit data for the second box.');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Error: Unable to submit data for the second box.');
                });
        } else {
            alert('Please select an emoji for each category in both boxes.');
        }
    }
    </script>
</body>
</html>
